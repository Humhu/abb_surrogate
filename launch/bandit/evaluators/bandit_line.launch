<!--Moves the arm back and forth at random speeds-->

<launch>

    <include file="$(find abb_surrogate)/launch/rewards.launch"/>

    <node pkg="broadcast" type="ConstantFeatures.py" name="const_feats" output="screen">
        <rosparam>
            stream_name: const_feats
            description: Constant features
            features: [1]
            mode: pull
            cache_time: 10
            publish_rate: 1.0
        </rosparam>
    </node>

    <node pkg="abb_surrogate" type="RandomSpeedWaypoints.py" name="arm_tester" output="screen">
        <rosparam>
            set_traj_service: /abb_arm/set_cartesian_trajectory
            motion_monitor:
                topic: /abb_arm/pose
                tol: 1E-3
                poll_rate: 50.0
            
            num_pose_waypoints: 10
            speed_stream_name: next_state

            waypoint_mode: fixed_waypoints
            waypoints_x: [-0.2, 0.2]
            waypoints_y: [0, 0]
            min_speed: 0.5
            max_speed: 0.6
            
            trigger_mode: service

            z_value: 0.15
            orientation: [1, 0, 0, 0]
            seed: 1
        </rosparam>
    </node>

    <node pkg="infitu" type="EmpiricalParameterEvaluator.py" name="parameter_evaluator" output="screen" required="true">
        <rosparam>
            parameter_set_service: /vo_interface/set_parameters
            start_evaluation_service: /arm_tester/start_trajectory
            reset_filter_service: /state_estimator/reset
            
            evaluation_delay: 0.1

            recorders:
                int_mse: integrated_mse/set_recording
                int_ape: integrated_ape/set_recording

        </rosparam>
        <param name="critique_record" value="$(arg critique_record)"/>
    </node>

</launch>